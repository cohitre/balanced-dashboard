<thead>
	<tr>
		<th class="col-md-3 customer"><span>Customer</span></th>
		<th class="col-md-5 transaction"><span>Transaction</span></th>
		<th class="col-md-2 payment-method">
			<span>{{view.paymentMethodText}}</span>
		</th>
		<th class="col-md-2 amount num">
			<span>Amount</span>
		</th>
	</tr>
</thead>
{{#if view.loader.results.hasNextPage}}
	{{view "results/results-load-more" results=view.loader.results columns=view.colspan}}
{{/if}}

<tbody>
	{{#each customer_group in view.groupedResults}}
		<tr>
			{{view "tables/cells/linked-two-lines-cell"
				item=customer_group.customer
				routeName=customer_group.customer.route_name
				primaryLabelText=customer_group.customer.display_me
				secondaryLabelText=customer_group.customer.email
				title=customer_group.customer.display_me_with_email
				class="customer-group two-lines"
			}}
			<td class="grouped-transactions-container divided" colspan="3">
				{{#each transaction in customer_group.transactions}}
					{{#view "results/grouped-transactions-table" hideCustomerColumn=view.hideCustomerColumn hideFromColumn=view.hideFromColumn hideToColumn=view.hideToColumn}}
						{{#if transaction.dispute}}
							{{view "results/grouped-transaction-row" item=transaction.dispute hideCustomerColumn=view.hideCustomerColumn hideFromColumn=view.hideFromColumn hideToColumn=view.hideToColumn}}
						{{/if}}

						{{#if transaction.refunds}}
							{{#each refund in transaction.refunds}}
								{{view "results/grouped-transaction-row" item=refund hideCustomerColumn=view.hideCustomerColumn hideFromColumn=view.hideFromColumn hideToColumn=view.hideToColumn}}
							{{/each}}
						{{/if}}

						{{#if transaction.reversals}}
							{{#each reversal in transaction.reversals}}
								{{view "results/grouped-transaction-row" item=reversal hideCustomerColumn=view.hideCustomerColumn hideFromColumn=view.hideFromColumn hideToColumn=view.hideToColumn}}
							{{/each}}
						{{/if}}

						{{#if transaction.settlement}}
							{{view "results/grouped-transaction-row"
								item=transaction.settlement
								hideCustomerColumn=view.hideCustomerColumn
								hideFromColumn=view.hideFromColumn
								hideToColumn=view.hideToColumn
							}}
						{{/if}}

						{{view "results/grouped-transaction-row" item=transaction hideCustomerColumn=view.hideCustomerColumn hideFromColumn=view.hideFromColumn hideToColumn=view.hideToColumn}}

						{{#if transaction.hold}}
							{{view "results/grouped-transaction-row" item=transaction.hold hideCustomerColumn=view.hideCustomerColumn hideFromColumn=view.hideFromColumn hideToColumn=view.hideToColumn}}
						{{/if}}
					{{/view}}
				{{/each}}
			</td>
	{{else}}
		<tr>
			<td {{bind-attr colspan="view.colspan"}} class="no-results">
				{{#if view.loader.results.isLoaded}}
					No transactions
				{{else}}
					Loading...
				{{/if}}
			</td>
		</tr>
	{{/each}}
</tbody>
